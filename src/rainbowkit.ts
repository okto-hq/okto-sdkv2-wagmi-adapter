import type { Wallet, WalletDetailsParams } from '@rainbow-me/rainbowkit';
import { createConnector } from '@wagmi/core';
import { okto, type OktoParameters } from './connector';

export interface OktoSdkParams {
  params: Omit<OktoParameters, 'loginType'>;
  type: 'google' | 'generic';
}

export const getOktoSdkConnector = ({ params, type }: OktoSdkParams) => {
  let id = 'okto-sdk';
  let name = 'Okto SDK';
  let shortName = 'okto';
  let iconUrl: string = logos.okto;
  let iconBackground = '#ffffff';

  switch (type) {
    case 'google':
      id = 'okto-sdk-google';
      name = 'Login with Google';
      shortName = 'Google';
      iconUrl = logos.google;
      iconBackground = '#ffffff';
      break;
    case 'generic':
    default:
      id = 'okto-sdk-generic';
      name = 'Okto SDK';
      shortName = 'Okto';
      iconUrl = logos.okto;
      iconBackground = '#f2f2f2';
      break;
  }

  const createWalletFn = (): Wallet => ({
    id: id,
    name: name,
    shortName: shortName,
    iconBackground: iconBackground,
    iconUrl: iconUrl,
    createConnector: (walletDetails: WalletDetailsParams) => {
      return createConnector((config) => ({
        ...okto({ loginType: type, ...params })(config),
        ...walletDetails,
      }));
    },
  });

  return createWalletFn;
};

const logos = {
  okto: 'data:image/svg+xml,%3Csvg%20width%3D%2229%22%20height%3D%2228%22%20viewBox%3D%220%200%2029%2028%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%2229%22%20height%3D%2228%22%20fill%3D%22%23D1D1D1%22%2F%3E%3Crect%20width%3D%2228%22%20height%3D%2228%22%20transform%3D%22translate(0.539062)%22%20fill%3D%22url(%23paint0_linear_1_11)%22%2F%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M14.5385%206.44031C10.3632%206.44031%206.97852%209.82504%206.97852%2014.0003C6.97852%2014.4101%207.01112%2014.8122%207.07386%2015.2043C7.11536%2015.472%207.27177%2016.0524%207.56549%2016.2329C7.93205%2016.4582%208.34698%2016.2645%208.68663%2016.106L8.68826%2016.1053C8.96021%2015.9783%209.75865%2015.6062%2010.1239%2015.4359C10.2075%2015.3943%2010.4284%2015.3385%2010.6432%2015.4485C10.9117%2015.5859%2010.9905%2015.8683%2010.9746%2016.0366C10.9586%2016.2049%2010.868%2016.4272%2010.6393%2016.5332C10.4563%2016.618%209.37929%2017.12%208.86368%2017.3603C8.75303%2017.4031%208.50801%2017.5634%208.41316%2017.8625C8.29461%2018.2363%208.47947%2018.5247%208.54421%2018.6076C8.59258%2018.6735%208.73676%2018.8207%208.92645%2018.8821C9.16356%2018.9588%209.36721%2018.9295%209.52621%2018.8569C9.65342%2018.7989%2012.177%2017.622%2013.4228%2017.0408C13.5045%2017.0003%2013.7212%2016.9474%2013.9354%2017.0599C14.203%2017.2005%2014.2801%2017.4654%2014.2665%2017.629C14.253%2017.7925%2014.1625%2018.0331%2013.9394%2018.1372C13.761%2018.2205%2012.1036%2018.9922%2011.2972%2019.3677C11.155%2019.4321%2010.8664%2019.6588%2010.8495%2020.0506C10.8285%2020.5403%2011.1672%2020.7725%2011.309%2020.8378C11.4209%2020.8954%2011.7153%2020.9781%2011.9976%2020.8475C12.2798%2020.7169%2015.2794%2019.3179%2016.744%2018.6347C16.8308%2018.5899%2017.0669%2018.5321%2017.2681%2018.6347C17.5316%2018.7692%2017.6192%2018.9987%2017.6192%2019.1723C17.6192%2019.3459%2017.6113%2019.4732%2017.3367%2019.7193C17.0965%2019.9345%2016.744%2020.1462%2015.5428%2020.6581C15.1315%2020.8334%2014.8511%2020.9624%2014.8972%2021.1838C14.9319%2021.3501%2015.053%2021.4134%2015.4552%2021.3952C15.8575%2021.377%2017.6687%2021.2348%2019.4831%2019.7193C21.085%2018.333%2022.0985%2016.285%2022.0985%2014.0003C22.0985%2013.1585%2021.9609%2012.3488%2021.707%2011.5924C21.6207%2011.6285%2021.526%2011.6483%2021.4267%2011.6483C21.0247%2011.6483%2020.6987%2011.3224%2020.6987%2010.9203C20.6987%2010.631%2020.8675%2010.3811%2021.112%2010.2637C19.8112%207.9801%2017.3547%206.44031%2014.5385%206.44031ZM17.3383%2011.2007C17.3383%2011.6027%2017.0124%2011.9287%2016.6103%2011.9287C16.2083%2011.9287%2015.8823%2011.6027%2015.8823%2011.2007C15.8823%2010.7986%2016.2083%2010.4727%2016.6103%2010.4727C17.0124%2010.4727%2017.3383%2010.7986%2017.3383%2011.2007Z%22%20fill%3D%22white%22%2F%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22paint0_linear_1_11%22%20x1%3D%2214%22%20y1%3D%220%22%20x2%3D%2214%22%20y2%3D%2228%22%20gradientUnits%3D%22userSpaceOnUse%22%3E%3Cstop%20stop-color%3D%22%236246F5%22%2F%3E%3Cstop%20offset%3D%220.493007%22%20stop-color%3D%22%235166EE%22%2F%3E%3Cstop%20offset%3D%221%22%20stop-color%3D%22%2356B9F9%22%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3C%2Fsvg%3E',
  google:
    'data:image/svg+xml,%3Csvg%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%220%200%2040%2040%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%2240%22%20height%3D%2240%22%20rx%3D%224%22%20fill%3D%22%23F2F2F2%22%2F%3E%3Cg%20clip-path%3D%22url(%23clip0_710_6227)%22%3E%3Cpath%20d%3D%22M29.6%2020.2273C29.6%2019.5182%2029.5364%2018.8364%2029.4182%2018.1818H20V22.05H25.3818C25.15%2023.3%2024.4455%2024.3591%2023.3864%2025.0682V27.5773H26.6182C28.5091%2025.8364%2029.6%2023.2727%2029.6%2020.2273Z%22%20fill%3D%22%234285F4%22%2F%3E%3Cpath%20d%3D%22M20%2030C22.7%2030%2024.9636%2029.1045%2026.6181%2027.5773L23.3863%2025.0682C22.4909%2025.6682%2021.3454%2026.0227%2020%2026.0227C17.3954%2026.0227%2015.1909%2024.2636%2014.4045%2021.9H11.0636V24.4909C12.7091%2027.7591%2016.0909%2030%2020%2030Z%22%20fill%3D%22%2334A853%22%2F%3E%3Cpath%20d%3D%22M14.4045%2021.9C14.2045%2021.3%2014.0909%2020.6591%2014.0909%2020C14.0909%2019.3409%2014.2045%2018.7%2014.4045%2018.1V15.5091H11.0636C10.3864%2016.8591%2010%2018.3864%2010%2020C10%2021.6136%2010.3864%2023.1409%2011.0636%2024.4909L14.4045%2021.9Z%22%20fill%3D%22%23FBBC04%22%2F%3E%3Cpath%20d%3D%22M20%2013.9773C21.4681%2013.9773%2022.7863%2014.4818%2023.8227%2015.4727L26.6909%2012.6045C24.9591%2010.9909%2022.6954%2010%2020%2010C16.0909%2010%2012.7091%2012.2409%2011.0636%2015.5091L14.4045%2018.1C15.1909%2015.7364%2017.3954%2013.9773%2020%2013.9773Z%22%20fill%3D%22%23E94235%22%2F%3E%3C%2Fg%3E%3Cdefs%3E%3CclipPath%20id%3D%22clip0_710_6227%22%3E%3Crect%20width%3D%2220%22%20height%3D%2220%22%20fill%3D%22white%22%20transform%3D%22translate(10%2010)%22%2F%3E%3C%2FclipPath%3E%3C%2Fdefs%3E%3C%2Fsvg%3E',
};
